{"version":3,"sources":["webpack:///static/js/5.88a0e1b7e3138a950eae.js","webpack:///./src/pages/library/new.vue","webpack:///./src/common/datetime.js?c1fa****","webpack:///new.vue?2752","webpack:///./src/pages/library/new.vue?da06","webpack:///./src/pages/library/new.vue?611e","webpack:///./src/pages/library/new.vue?8107"],"names":["webpackJsonp","103","module","exports","__webpack_require__","injectStyle","ssrContext","Component","105","__webpack_exports__","dateFormat","value","da","Date","replace","split","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getTimespan","time","tarTime","this","now","span","getTime","days","Math","floor","leave1","hours","leave2","minutes","leave3","seconds","round","117","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default","name","data","book","price","image","subject","type","isbn","year","created","methods","submit","_this","a","mark","_callee","result","wrap","_context","prev","next","$db","newBook","sent","insertedCount","alert","$router","push","stop","searchOnlineBook","_this2","_callee2","_context2","search","author","publisher","watch","119","i","version","sources","names","mappings","file","sourcesContent","sourceRoot","128","content","locals","138","render","_vm","_h","$createElement","_c","_self","staticClass","directives","rawName","expression","attrs","placeholder","domProps","on","input","$event","target","composing","staticStyle","width","click","_v","src","staticRenderFns"],"mappings":"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","file":"static/js/5.88a0e1b7e3138a950eae.js","sourcesContent":["webpackJsonp([5],{\n\n/***/ 103:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(128)\n}\nvar Component = __webpack_require__(23)(\n  /* script */\n  __webpack_require__(117),\n  /* template */\n  __webpack_require__(138),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-13d61879\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 105:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/*\r\n * Name: datetime.js\r\n * Desc: date and time formatter\r\n * Author: T.T\r\n * Last Update: 2017/5/12 09:13\r\n */\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    dateFormat: function dateFormat(value) {\n        var da = new Date(value.replace(\"/Date(\", \"\").replace(\")/\", \"\").split(\"+\")[0]);\n        return da.getFullYear() + \"-\" + (da.getMonth() + 1 < 10 ? \"0\" + (da.getMonth() + 1) : da.getMonth() + 1) + \"-\" + (da.getDate() < 10 ? \"0\" + da.getDate() : da.getDate()) + \" \" + (da.getHours() < 10 ? \"0\" + da.getHours() : da.getHours()) + \":\" + (da.getMinutes() < 10 ? \"0\" + da.getMinutes() : da.getMinutes()) + \":\" + (da.getSeconds() < 10 ? \"0\" + da.getSeconds() : da.getSeconds());\n    },\n    getTimespan: function getTimespan(time) {\n        var tarTime = new Date(this.dateFormat(time));\n        var now = new Date();\n        var span = now.getTime() - tarTime.getTime();\n\n        var days = Math.floor(span / (24 * 3600 * 1000));\n        if (days > 0) return days + \" days ago\";\n        var leave1 = span % (24 * 3600 * 1000); //计算天数后剩余的毫秒数\n        var hours = Math.floor(leave1 / (3600 * 1000));\n        if (hours > 0) return hours + \" hours ago\";\n        var leave2 = leave1 % (3600 * 1000); //计算小时数后剩余的毫秒数\n        var minutes = Math.floor(leave2 / (60 * 1000));\n        if (minutes > 0) return minutes + \" minutes ago\";\n        var leave3 = leave2 % (60 * 1000); //计算分钟数后剩余的毫秒数\n        var seconds = Math.round(leave3 / 1000);\n        if (seconds > 0) return seconds + \" seconds ago\";\n    }\n});\n\n/***/ }),\n\n/***/ 117:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(46);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__ = __webpack_require__(45);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__common_datetime__ = __webpack_require__(105);\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'book-new',\n  data: function data() {\n    return {\n      book: {\n        name: '',\n        price: '',\n        image: '',\n        subject: '',\n        type: '',\n        isbn: '',\n        year: ''\n      }\n    };\n  },\n\n  created: function created() {},\n  methods: {\n    submit: function submit() {\n      var _this = this;\n\n      return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee() {\n        var result;\n        return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(_this.book.name && _this.book.price && _this.book.image && _this.book.subject && _this.book.isbn)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _context.next = 3;\n                return _this.$db.newBook(_this, _this.book);\n\n              case 3:\n                result = _context.sent;\n\n                if (result.insertedCount > 0) {\n                  alert('提交成功');\n                  _this.$router.push('/library');\n                } else {\n                  alert('提交失败,可能已有书籍');\n                }\n\n              case 5:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, _this);\n      }))();\n    },\n    searchOnlineBook: function searchOnlineBook() {\n      var _this2 = this;\n\n      return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee2() {\n        var result;\n        return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _this2.$db.searchOnlineBook(_this2, { search: _this2.book.isbn });\n\n              case 2:\n                result = _context2.sent;\n\n                _this2.book = {\n                  isbn: _this2.book.isbn,\n                  name: result.name,\n                  price: result.price,\n                  image: result.image,\n                  author: result.author,\n                  publisher: result.publisher,\n                  year: result.year\n                };\n\n              case 4:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, _this2);\n      }))();\n    }\n  },\n  watch: {}\n});\n\n/***/ }),\n\n/***/ 119:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(96)(true);\n// imports\n\n\n// module\nexports.push([module.i, \".full-width[data-v-13d61879]{width:calc(100% - 20px)}\", \"\", {\"version\":3,\"sources\":[\"D:/MyGit/TT/tt.blog/src/pages/library/new.vue\"],\"names\":[],\"mappings\":\"AACA,6BACE,uBAAyB,CAC1B\",\"file\":\"new.vue\",\"sourcesContent\":[\"\\n.full-width[data-v-13d61879] {\\n  width: calc(100% - 20px);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 128:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(119);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(97)(\"1951b85c\", content, true);\n\n/***/ }),\n\n/***/ 138:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"input\"\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.book.isbn),\n      expression: \"book.isbn\"\n    }],\n    staticClass: \"full-width\",\n    attrs: {\n      \"placeholder\": \"ISBN\"\n    },\n    domProps: {\n      \"value\": (_vm.book.isbn)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.book.isbn = $event.target.value\n      }\n    }\n  }), _c('br'), _c('br'), _c('button', {\n    staticClass: \"raised-button\",\n    staticStyle: {\n      \"width\": \"100px\"\n    },\n    on: {\n      \"click\": _vm.searchOnlineBook\n    }\n  }, [_vm._v(\"搜 索\")]), _c('br'), _c('div', [_c('p', [_vm._v(\"书名：\")]), _c('p', [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.book.name),\n      expression: \"book.name\"\n    }],\n    staticClass: \"full-width\",\n    attrs: {\n      \"placeholder\": \"Name\"\n    },\n    domProps: {\n      \"value\": (_vm.book.name)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.book.name = $event.target.value\n      }\n    }\n  })]), _c('p', [_vm._v(\"作者：\")]), _c('p', [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.book.author),\n      expression: \"book.author\"\n    }],\n    staticClass: \"full-width\",\n    attrs: {\n      \"placeholder\": \"Author\"\n    },\n    domProps: {\n      \"value\": (_vm.book.author)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.book.author = $event.target.value\n      }\n    }\n  })]), _c('p', [_vm._v(\"出版社：\")]), _c('p', [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.book.publisher),\n      expression: \"book.publisher\"\n    }],\n    staticClass: \"full-width\",\n    attrs: {\n      \"placeholder\": \"Publisher\"\n    },\n    domProps: {\n      \"value\": (_vm.book.publisher)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.book.publisher = $event.target.value\n      }\n    }\n  })]), _c('p', [_vm._v(\"价格：\")]), _c('p', [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.book.price),\n      expression: \"book.price\"\n    }],\n    staticClass: \"full-width\",\n    attrs: {\n      \"placeholder\": \"Price\"\n    },\n    domProps: {\n      \"value\": (_vm.book.price)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.book.price = $event.target.value\n      }\n    }\n  })]), _c('p', [_vm._v(\"出版年：\")]), _c('p', [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.book.year),\n      expression: \"book.year\"\n    }],\n    staticClass: \"full-width\",\n    attrs: {\n      \"placeholder\": \"Year\"\n    },\n    domProps: {\n      \"value\": (_vm.book.year)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.book.year = $event.target.value\n      }\n    }\n  })]), _c('div', [_c('p', [_vm._v(\"封面：\")]), _c('img', {\n    attrs: {\n      \"src\": _vm.book.image\n    }\n  }), _c('p', [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.book.image),\n      expression: \"book.image\"\n    }],\n    staticClass: \"full-width\",\n    attrs: {\n      \"placeholder\": \"图片地址\"\n    },\n    domProps: {\n      \"value\": (_vm.book.image)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.book.image = $event.target.value\n      }\n    }\n  })])])]), _c('br'), _c('p', [_vm._v(\"请输入学科分类和类型：\")]), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.book.subject),\n      expression: \"book.subject\"\n    }],\n    staticClass: \"full-width\",\n    attrs: {\n      \"placeholder\": \"Subject\"\n    },\n    domProps: {\n      \"value\": (_vm.book.subject)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.book.subject = $event.target.value\n      }\n    }\n  }), _c('br'), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.book.type),\n      expression: \"book.type\"\n    }],\n    staticClass: \"full-width\",\n    attrs: {\n      \"placeholder\": \"Type\"\n    },\n    domProps: {\n      \"value\": (_vm.book.type)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.book.type = $event.target.value\n      }\n    }\n  }), _c('br'), _c('br'), _c('div', {\n    staticClass: \"center aligned\"\n  }, [_c('button', {\n    staticClass: \"raised-button\",\n    staticStyle: {\n      \"width\": \"200px\"\n    },\n    on: {\n      \"click\": _vm.submit\n    }\n  }, [_vm._v(\"Submit\")])])])\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/5.88a0e1b7e3138a950eae.js","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-13d61879\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=styles&index=0!./new.vue\")\n}\nvar Component = require(\"!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=script&index=0!./new.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-13d61879\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/template-compiler/preprocessor?engine=jade!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=template&index=0!./new.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-13d61879\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/library/new.vue\n// module id = 103\n// module chunks = 5","/*\r\n * Name: datetime.js\r\n * Desc: date and time formatter\r\n * Author: T.T\r\n * Last Update: 2017/5/12 09:13\r\n */\r\n\r\nexport default {\r\n    dateFormat(value) {\r\n        var da = new Date(value.replace(\"/Date(\", \"\").replace(\")/\", \"\").split(\"+\")[0]);\r\n        return da.getFullYear() + \"-\" + ((da.getMonth() + 1) < 10 ? \"0\" + (da.getMonth() + 1) : (da.getMonth() + 1)) + \"-\" + (da.getDate() < 10 ? \"0\" + da.getDate() : da.getDate()) + \" \" + (da.getHours() < 10 ? \"0\" + da.getHours() : da.getHours()) + \":\" + (da.getMinutes() < 10 ? \"0\" + da.getMinutes() : da.getMinutes()) + \":\" + (da.getSeconds() < 10 ? \"0\" + da.getSeconds() : da.getSeconds());\r\n    },\r\n    getTimespan(time) {\r\n        var tarTime = new Date(this.dateFormat(time));\r\n        var now = new Date();\r\n        var span = now.getTime() - tarTime.getTime();\r\n\r\n        var days = Math.floor(span / (24 * 3600 * 1000));\r\n        if (days > 0)\r\n            return days + \" days ago\";\r\n        var leave1 = span % (24 * 3600 * 1000); //计算天数后剩余的毫秒数\r\n        var hours = Math.floor(leave1 / (3600 * 1000));\r\n        if (hours > 0)\r\n            return hours + \" hours ago\";\r\n        var leave2 = leave1 % (3600 * 1000); //计算小时数后剩余的毫秒数\r\n        var minutes = Math.floor(leave2 / (60 * 1000));\r\n        if (minutes > 0)\r\n            return minutes + \" minutes ago\";\r\n        var leave3 = leave2 % (60 * 1000); //计算分钟数后剩余的毫秒数\r\n        var seconds = Math.round(leave3 / 1000);\r\n        if (seconds > 0)\r\n            return seconds + \" seconds ago\";\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/common/datetime.js","<template lang=\"jade\">\r\n  div.input\r\n    input.full-width(v-model=\"book.isbn\",placeholder=\"ISBN\")\r\n    br\r\n    br\r\n    button.raised-button(@click=\"searchOnlineBook\", style=\"width:100px\") 搜 索\r\n    br\r\n    div \r\n      p 书名：\r\n      p \r\n        input.full-width(v-model=\"book.name\",placeholder=\"Name\")\r\n      p 作者：\r\n      p \r\n        input.full-width(v-model=\"book.author\",placeholder=\"Author\")\r\n      p 出版社：\r\n      p \r\n        input.full-width(v-model=\"book.publisher\",placeholder=\"Publisher\")\r\n      p 价格：\r\n      p \r\n        input.full-width(v-model=\"book.price\",placeholder=\"Price\")\r\n      p 出版年：\r\n      p \r\n        input.full-width(v-model=\"book.year\",placeholder=\"Year\")\r\n      div\r\n        p 封面：\r\n        img(:src='book.image')\r\n        p \r\n          input.full-width(v-model=\"book.image\",placeholder=\"图片地址\")\r\n    br\r\n    p 请输入学科分类和类型：\r\n    input.full-width(v-model=\"book.subject\",placeholder=\"Subject\")\r\n    br\r\n    input.full-width(v-model=\"book.type\",placeholder=\"Type\")\r\n    br\r\n    br\r\n    .center.aligned\r\n      button.raised-button(@click=\"submit\", style=\"width:200px\") Submit\r\n</template>\r\n\r\n<script>\r\nimport Datetime from '@/common/datetime'\r\n\r\nexport default {\r\n  name: 'book-new',\r\n  data() {\r\n    return {\r\n      book: {\r\n        name: '',\r\n        price: '',\r\n        image: '',\r\n        subject: '',\r\n        type: '',\r\n        isbn: '',\r\n        year: ''\r\n      }\r\n    }\r\n  },\r\n  created: function() {\r\n\r\n  },\r\n  methods: {\r\n    async submit() {\r\n      if (this.book.name && this.book.price && this.book.image && this.book.subject && this.book.isbn) {\r\n        let result = await this.$db.newBook(this, this.book)\r\n        if(result.insertedCount > 0){\r\n          alert('提交成功');\r\n          this.$router.push('/library')\r\n        }else{\r\n          alert('提交失败,可能已有书籍');\r\n        }\r\n      }\r\n    },\r\n    async searchOnlineBook() {\r\n      let result = await this.$db.searchOnlineBook(this, { search: this.book.isbn })\r\n      this.book = {\r\n        isbn: this.book.isbn,\r\n        name: result.name,\r\n        price: result.price,\r\n        image: result.image,\r\n        author: result.author,\r\n        publisher: result.publisher,\r\n        year: result.year\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.full-width {\r\n  width: calc(100% - 20px);\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// new.vue?03f740f2","exports = module.exports = require(\"../../../node_modules/_css-loader@0.28.5@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".full-width[data-v-13d61879]{width:calc(100% - 20px)}\", \"\", {\"version\":3,\"sources\":[\"D:/MyGit/TT/tt.blog/src/pages/library/new.vue\"],\"names\":[],\"mappings\":\"AACA,6BACE,uBAAyB,CAC1B\",\"file\":\"new.vue\",\"sourcesContent\":[\"\\n.full-width[data-v-13d61879] {\\n  width: calc(100% - 20px);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.28.5@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/_vue-loader@12.2.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-13d61879\",\"scoped\":true,\"hasInlineConfig\":false}!./~/_sass-loader@6.0.6@sass-loader/lib/loader.js?{\"sourceMap\":true}!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./src/pages/library/new.vue\n// module id = 119\n// module chunks = 5","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/_css-loader@0.28.5@css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-13d61879\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_sass-loader@6.0.6@sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./new.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/_vue-style-loader@3.0.1@vue-style-loader/lib/addStylesClient.js\")(\"1951b85c\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/_vue-style-loader@3.0.1@vue-style-loader!./~/_css-loader@0.28.5@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/_vue-loader@12.2.2@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-13d61879\",\"scoped\":true,\"hasInlineConfig\":false}!./~/_sass-loader@6.0.6@sass-loader/lib/loader.js?{\"sourceMap\":true}!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=styles&index=0!./src/pages/library/new.vue\n// module id = 128\n// module chunks = 5","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"input\"\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.book.isbn),\n      expression: \"book.isbn\"\n    }],\n    staticClass: \"full-width\",\n    attrs: {\n      \"placeholder\": \"ISBN\"\n    },\n    domProps: {\n      \"value\": (_vm.book.isbn)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.book.isbn = $event.target.value\n      }\n    }\n  }), _c('br'), _c('br'), _c('button', {\n    staticClass: \"raised-button\",\n    staticStyle: {\n      \"width\": \"100px\"\n    },\n    on: {\n      \"click\": _vm.searchOnlineBook\n    }\n  }, [_vm._v(\"搜 索\")]), _c('br'), _c('div', [_c('p', [_vm._v(\"书名：\")]), _c('p', [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.book.name),\n      expression: \"book.name\"\n    }],\n    staticClass: \"full-width\",\n    attrs: {\n      \"placeholder\": \"Name\"\n    },\n    domProps: {\n      \"value\": (_vm.book.name)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.book.name = $event.target.value\n      }\n    }\n  })]), _c('p', [_vm._v(\"作者：\")]), _c('p', [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.book.author),\n      expression: \"book.author\"\n    }],\n    staticClass: \"full-width\",\n    attrs: {\n      \"placeholder\": \"Author\"\n    },\n    domProps: {\n      \"value\": (_vm.book.author)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.book.author = $event.target.value\n      }\n    }\n  })]), _c('p', [_vm._v(\"出版社：\")]), _c('p', [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.book.publisher),\n      expression: \"book.publisher\"\n    }],\n    staticClass: \"full-width\",\n    attrs: {\n      \"placeholder\": \"Publisher\"\n    },\n    domProps: {\n      \"value\": (_vm.book.publisher)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.book.publisher = $event.target.value\n      }\n    }\n  })]), _c('p', [_vm._v(\"价格：\")]), _c('p', [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.book.price),\n      expression: \"book.price\"\n    }],\n    staticClass: \"full-width\",\n    attrs: {\n      \"placeholder\": \"Price\"\n    },\n    domProps: {\n      \"value\": (_vm.book.price)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.book.price = $event.target.value\n      }\n    }\n  })]), _c('p', [_vm._v(\"出版年：\")]), _c('p', [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.book.year),\n      expression: \"book.year\"\n    }],\n    staticClass: \"full-width\",\n    attrs: {\n      \"placeholder\": \"Year\"\n    },\n    domProps: {\n      \"value\": (_vm.book.year)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.book.year = $event.target.value\n      }\n    }\n  })]), _c('div', [_c('p', [_vm._v(\"封面：\")]), _c('img', {\n    attrs: {\n      \"src\": _vm.book.image\n    }\n  }), _c('p', [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.book.image),\n      expression: \"book.image\"\n    }],\n    staticClass: \"full-width\",\n    attrs: {\n      \"placeholder\": \"图片地址\"\n    },\n    domProps: {\n      \"value\": (_vm.book.image)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.book.image = $event.target.value\n      }\n    }\n  })])])]), _c('br'), _c('p', [_vm._v(\"请输入学科分类和类型：\")]), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.book.subject),\n      expression: \"book.subject\"\n    }],\n    staticClass: \"full-width\",\n    attrs: {\n      \"placeholder\": \"Subject\"\n    },\n    domProps: {\n      \"value\": (_vm.book.subject)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.book.subject = $event.target.value\n      }\n    }\n  }), _c('br'), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.book.type),\n      expression: \"book.type\"\n    }],\n    staticClass: \"full-width\",\n    attrs: {\n      \"placeholder\": \"Type\"\n    },\n    domProps: {\n      \"value\": (_vm.book.type)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.book.type = $event.target.value\n      }\n    }\n  }), _c('br'), _c('br'), _c('div', {\n    staticClass: \"center aligned\"\n  }, [_c('button', {\n    staticClass: \"raised-button\",\n    staticStyle: {\n      \"width\": \"200px\"\n    },\n    on: {\n      \"click\": _vm.submit\n    }\n  }, [_vm._v(\"Submit\")])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-13d61879\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/_vue-loader@12.2.2@vue-loader/lib/template-compiler/preprocessor.js?engine=jade!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/pages/library/new.vue\n// module id = 138\n// module chunks = 5"],"sourceRoot":""}